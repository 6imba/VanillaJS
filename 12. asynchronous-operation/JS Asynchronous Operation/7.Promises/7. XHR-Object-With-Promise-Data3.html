<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3>XMLHttpResponse Object, with promise to perform async operation.</h3>
    <button id="getDataBtn">Load Data</button>
    <p id="jsonData">My Feteched JSON data!</p>

    <!-- 1 -->
    <!-- <script>
        function loadData(method, url){
            const promise = new Promise((taskResolve, taskReject) => { // create new promise object using Promise() constructor which takes function with two args(resolve & reject)
                // move all XHR code inside promise_contructor's-function
                const xhr = new XMLHttpRequest();
                xhr.open(method, url, true); // while fetching data from file path it might take time so async true.
                xhr.responseType = "json";
                xhr.onload = () => {
                    taskResolve(xhr.response);
                };
                xhr.send();
            })
            .then(promiseResponse => console.log(promiseResponse))
        }
        const getBtn = document.getElementById("getDataBtn");
        getBtn.addEventListener("click", ()=>loadData('GET', 'https://reqres.in/api/user/1'));
    </script> -->

    <!-- 2 -->
    <!-- <script>
        function loadData(method, url){
            const promise = new Promise((taskResolve, taskReject) => { // create new promise object using Promise() constructor which takes function with two args(resolve & reject)
                // move all XHR code inside promise_contructor's-function
                const xhr = new XMLHttpRequest();
                xhr.open(method, url, true); // while fetching data from file path it might take time so async true.
                xhr.responseType = "json";
                xhr.onload = () => {
                    taskResolve(xhr.response);
                };
                xhr.send();
            })
            .then(promiseResponse => outputData.innerHTML = promiseResponse)
        }
        const getBtn = document.getElementById("getDataBtn");
        const outputData = document.getElementById("jsonData");
        getBtn.addEventListener("click", ()=>loadData('GET', 'https://reqres.in/api/user/1'));
    </script> -->

    <!-- 3 -->
    <!-- <script>
        function loadData(method, url){
            const promise = new Promise((taskResolve, taskReject) => { // create new promise object using Promise() constructor which takes function with two args(resolve & reject)
                // move all XHR code inside promise_contructor's-function
                const xhr = new XMLHttpRequest();
                xhr.open(method, url, true); // while fetching data from file path it might take time so async true.
                xhr.responseType = "json";
                xhr.onload = () => {
                    taskResolve(xhr.response);
                };
                xhr.send();
            })
            .then(promiseResponse => outputData.innerHTML = JSON.stringify(promiseResponse))
        }
        const getBtn = document.getElementById("getDataBtn");
        const outputData = document.getElementById("jsonData");
        getBtn.addEventListener("click", ()=>loadData('GET', 'https://reqres.in/api/user/1'));
    </script> -->

    <!-- 4 -->
    <script>
        function loadData(method, url){
            const promise = new Promise((taskResolve, taskReject) => { // create new promise object using Promise() constructor which takes function with two args(resolve & reject)
                // move all XHR code inside promise_contructor's-function
                const xhr = new XMLHttpRequest();
                xhr.open(method, url, true); // while fetching data from file path it might take time so async true.
                xhr.responseType = "json";
                xhr.onload = () => {
                    taskResolve(xhr.response);
                };
                xhr.send();
            })
            .then(promiseResponse => {
                    console.log(promiseResponse);
                    console.log(typeof(promiseResponse));
                    outputData.innerHTML = JSON.stringify(promiseResponse);
                    console.log(JSON.stringify(promiseResponse));
                }
            )
        }
        const getBtn = document.getElementById("getDataBtn");
        const outputData = document.getElementById("jsonData");
        getBtn.addEventListener("click", ()=>loadData('GET', 'https://reqres.in/api/user/1'));
    </script>

</body>
</html>